(()=>{"use strict";const e=e=>{console.log(e);const t=document.getElementById("projects-field__table-body");if(Object.keys(e).length>0)for(const o in e)t.insertAdjacentHTML("beforeend",`\n            <tr data-key="${project[o]}">\n                <td>${project[o].name}</td>\n                <td>${project[o].date_of_change}</td>\n                <td>${project[o].number_of_users}</td>\n                <td><img src="./img/repository-page/edit-icon.svg" alt=""></td>\n                <td><img  class="remove-project-btn" src="./img/repository-page/delete-icon.svg" alt=""></td>\n            </tr>\n        `)};window.projectRepo=new class{getProjects(){return fetch("http://GroupCode/projects.php",{mode:"no-cors"}).then((e=>{console.log(e.json())}))}getProject(e){return fetch(`http://localhost:3333/projects/${e}`).then((e=>e.json()))}removeProject(e){return fetch(`http://localhost:3333/projects/${e}`,{method:"DELETE"}).then((e=>e.json()))}sortProjectsByDefault(e){return fetch(`http://localhost:3333/projects?${e}`).then((e=>e.json()))}getSearchUsers(e){return fetch(`http://localhost:3333/projects?name_like=${e}`).then((e=>e.json()))}},window.usersDate=new class{getUsers(){return fetch("http://localhost:3333/users").then((e=>e.json()))}getUser(e){return fetch(`http://localhost:3333/users/${e}`).then((e=>e.json()))}removeUsers(e){return fetch(`http://localhost:3333/users/${e}`,{method:"DELETE"}).then((e=>e.json()))}},window.rolesDate=new class{_roles=[{id:0,name:"Администратор проекта"},{id:1,name:"Программист"},{id:2,name:"Просматривающий"}];get roles(){return this._users}set roles(e){this._roles=e}logger(){console.log(this.roles)}},window.rolesInProjectDate=new class{getRolesInProject(){return fetch("http://localhost:3333/rolesInProject").then((e=>e.json()))}getRoleInProject(e){return fetch(`http://localhost:3333/rolesInProject/${e}`).then((e=>e.json()))}removeRoleInProject(e){return fetch(`http://localhost:3333/rolesInProject/${e}`,{method:"DELETE"}).then((e=>e.json()))}},projectRepo.getProjects().then((t=>{!t||JSON.parse(t),e(t)})),document.getElementById("projects-field__table-body").addEventListener("click",(t=>{if(t.target.matches(".remove-project-btn")){const o=t.target.closest("tr").dataset.key;projectRepo.removeProject(o).then((t=>{projectRepo.getProjects().then((t=>{e(t,rolesInProjectDate.rolesInProject)}))}))}})),(()=>{const t=document.getElementById("search-input");t.addEventListener("input",(o=>{projectRepo.getSearchUsers(t.value).then((t=>{e(t,rolesInProject)}))}))})(),(()=>{const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal-sort"),o=document.querySelector(".modal-sort__close-btn"),r=document.querySelector(".wrapper-repo"),n=o=>{o.addEventListener("click",(o=>{o.preventDefault(),t.style.display="none",e.style.display="none",document.body.style.overflow=""}))};r.addEventListener("click",(o=>{var r;o.preventDefault(),o.target.closest(".sort-button")&&(r=t,(({timing:e,draw:t,duration:o})=>{let r=performance.now();requestAnimationFrame((function n(s){let c=(s-r)/o;c>1&&(c=1);let l=e(c);t(l),c<1&&requestAnimationFrame(n)}))})({duration:500,timing:e=>e,draw(t){r.style.opacity=t,e.style.opacity=t}}),r.style.display="block",e.style.display="block",document.body.style.overflow="hidden")})),n(e),n(o)})()})();